
crosscheck.suite('Javascript Host Extensions', {
	def: crosscheck.metadef,
	extend: crosscheck.metadef.extend,

	test_extending_an_existing_class_with_a_readonly_attribute: function() {
		var A = this.def(function() {
			this.constant('value', 10)
		})

		var a1 = new A()

		this.extend(A, function() {
			this.constant('value', 20)
		})

		var a2 = new A()

		assertEquals(20, a1.value)
		assertEquals(20, a2.value)
	},

	test_remove_attribute_from_an_existing_class: function() {
		var A = this.def(function() {
			this.constant('foo', 'bar')
			this.constant('baz', 'bang')
		})

		var a = new A();
		assertEquals('bar', a.foo)
		assertEquals('bang', a.baz)
		this.extend(A, function() {
			this.deleteAttr('foo', 'baz')

		})
		assertNotDefined(a.foo)
		assertNotDefined(a.baz)
	}
})